#!/bin/sh
WIKIPAGE=SVG-Test-suite.md
TESTSUITEURI=http://www.w3.org/Graphics/SVG/Test/20110816/svg
FILES="animate-dom-01-f.svg
animate-dom-02-f.svg
animate-elem-02-t.svg
animate-elem-03-t.svg
animate-elem-04-t.svg
animate-elem-05-t.svg
animate-elem-06-t.svg
animate-elem-07-t.svg
animate-elem-08-t.svg
animate-elem-09-t.svg
animate-elem-10-t.svg
animate-elem-11-t.svg
animate-elem-12-t.svg
animate-elem-13-t.svg
animate-elem-14-t.svg
animate-elem-15-t.svg
animate-elem-17-t.svg
animate-elem-19-t.svg
animate-elem-20-t.svg
animate-elem-21-t.svg
animate-elem-22-b.svg
animate-elem-23-t.svg
animate-elem-24-t.svg
animate-elem-25-t.svg
animate-elem-26-t.svg
animate-elem-27-t.svg
animate-elem-28-t.svg
animate-elem-29-b.svg
animate-elem-30-t.svg
animate-elem-31-t.svg
animate-elem-32-t.svg
animate-elem-33-t.svg
animate-elem-34-t.svg
animate-elem-35-t.svg
animate-elem-36-t.svg
animate-elem-37-t.svg
animate-elem-38-t.svg
animate-elem-39-t.svg
animate-elem-40-t.svg
animate-elem-41-t.svg
animate-elem-44-t.svg
animate-elem-46-t.svg
animate-elem-52-t.svg
animate-elem-53-t.svg
animate-elem-60-t.svg
animate-elem-61-t.svg
animate-elem-62-t.svg
animate-elem-63-t.svg
animate-elem-64-t.svg
animate-elem-65-t.svg
animate-elem-66-t.svg
animate-elem-67-t.svg
animate-elem-68-t.svg
animate-elem-69-t.svg
animate-elem-70-t.svg
animate-elem-77-t.svg
animate-elem-78-t.svg
animate-elem-80-t.svg
animate-elem-81-t.svg
animate-elem-82-t.svg
animate-elem-83-t.svg
animate-elem-84-t.svg
animate-elem-85-t.svg
animate-elem-86-t.svg
animate-elem-87-t.svg
animate-elem-88-t.svg
animate-elem-89-t.svg
animate-elem-90-b.svg
animate-elem-91-t.svg
animate-elem-92-t.svg
animate-interact-events-01-t.svg
animate-interact-pevents-01-t.svg
animate-interact-pevents-02-t.svg
animate-interact-pevents-03-t.svg
animate-interact-pevents-04-t.svg
animate-pservers-grad-01-b.svg
animate-script-elem-01-b.svg
animate-struct-dom-01-b.svg
color-prof-01-f.svg
color-prop-01-b.svg
color-prop-02-f.svg
color-prop-03-t.svg
color-prop-04-t.svg
color-prop-05-t.svg
conform-viewers-01-t.svgz
conform-viewers-02-f.svg
conform-viewers-03-f.svg
coords-coord-01-t.svg
coords-coord-02-t.svg
coords-dom-01-f.svg
coords-dom-02-f.svg
coords-dom-03-f.svg
coords-dom-04-f.svg
coords-trans-01-b.svg
coords-trans-02-t.svg
coords-trans-03-t.svg
coords-trans-04-t.svg
coords-trans-05-t.svg
coords-trans-06-t.svg
coords-trans-07-t.svg
coords-trans-08-t.svg
coords-trans-09-t.svg
coords-trans-10-f.svg
coords-trans-11-f.svg
coords-trans-12-f.svg
coords-trans-13-f.svg
coords-trans-14-f.svg
coords-transformattr-01-f.svg
coords-transformattr-02-f.svg
coords-transformattr-03-f.svg
coords-transformattr-04-f.svg
coords-transformattr-05-f.svg
coords-units-01-b.svg
coords-units-02-b.svg
coords-units-03-b.svg
coords-viewattr-01-b.svg
coords-viewattr-02-b.svg
coords-viewattr-03-b.svg
coords-viewattr-04-f.svg
extend-namespace-01-f.svg
filters-background-01-f.svg
filters-blend-01-b.svg
filters-color-01-b.svg
filters-color-02-b.svg
filters-composite-02-b.svg
filters-composite-03-f.svg
filters-composite-04-f.svg
filters-composite-05-f.svg
filters-comptran-01-b.svg
filters-conv-01-f.svg
filters-conv-02-f.svg
filters-conv-03-f.svg
filters-conv-04-f.svg
filters-conv-05-f.svg
filters-diffuse-01-f.svg
filters-displace-01-f.svg
filters-displace-02-f.svg
filters-example-01-b.svg
filters-felem-01-b.svg
filters-felem-02-f.svg
filters-gauss-01-b.svg
filters-gauss-02-f.svg
filters-gauss-03-f.svg
filters-image-01-b.svg
filters-image-02-b.svg
filters-image-03-f.svg
filters-image-04-f.svg
filters-image-05-f.svg
filters-light-01-f.svg
filters-light-02-f.svg
filters-light-03-f.svg
filters-light-04-f.svg
filters-light-05-f.svg
filters-morph-01-f.svg
filters-offset-01-b.svg
filters-offset-02-b.svg
filters-overview-01-b.svg
filters-overview-02-b.svg
filters-overview-03-b.svg
filters-specular-01-f.svg
filters-tile-01-b.svg
filters-turb-01-f.svg
filters-turb-02-f.svg
fonts-desc-01-t.svg
fonts-desc-02-t.svg
fonts-desc-03-t.svg
fonts-desc-04-t.svg
fonts-desc-05-t.svg
fonts-elem-01-t.svg
fonts-elem-02-t.svg
fonts-elem-03-b.svg
fonts-elem-04-b.svg
fonts-elem-05-t.svg
fonts-elem-06-t.svg
fonts-elem-07-b.svg
fonts-glyph-02-t.svg
fonts-glyph-03-t.svg
fonts-glyph-04-t.svg
fonts-kern-01-t.svg
fonts-overview-201-t.svg
imp-path-01-f.svg
interact-cursor-01-f.svg
interact-dom-01-b.svg
interact-events-01-b.svg
interact-events-02-b.svg
interact-events-202-f.svg
interact-events-203-t.svg
interact-order-01-b.svg
interact-order-02-b.svg
interact-order-03-b.svg
interact-pevents-01-b.svg
interact-pevents-03-b.svg
interact-pevents-04-t.svg
interact-pevents-05-b.svg
interact-pevents-07-t.svg
interact-pevents-08-f.svg
interact-pevents-09-f.svg
interact-pevents-10-f.svg
interact-pointer-01-t.svg
interact-pointer-02-t.svg
interact-pointer-03-t.svg
interact-pointer-04-f.svg
interact-zoom-01-t.svg
interact-zoom-02-t.svg
interact-zoom-03-t.svg
linking-a-01-b.svg
linking-a-03-b.svg
linking-a-04-t.svg
linking-a-05-t.svg
linking-a-07-t.svg
linking-a-08-t.svg
linking-a-09-b.svg
linking-a-10-f.svg
linking-frag-01-f.svg
linking-uri-01-b.svg
linking-uri-02-b.svg
linking-uri-03-t.svg
masking-filter-01-f.svg
masking-intro-01-f.svg
masking-mask-01-b.svg
masking-mask-02-f.svg
masking-opacity-01-b.svg
masking-path-01-b.svg
masking-path-02-b.svg
masking-path-03-b.svg
masking-path-04-b.svg
masking-path-05-f.svg
masking-path-06-b.svg
masking-path-07-b.svg
masking-path-08-b.svg
masking-path-09-b.svg
masking-path-10-b.svg
masking-path-11-b.svg
masking-path-12-f.svg
masking-path-13-f.svg
masking-path-14-f.svg
metadata-example-01-t.svg
painting-control-01-f.svg
painting-control-02-f.svg
painting-control-03-f.svg
painting-control-04-f.svg
painting-control-05-f.svg
painting-control-06-f.svg
painting-fill-01-t.svg
painting-fill-02-t.svg
painting-fill-03-t.svg
painting-fill-04-t.svg
painting-fill-05-b.svg
painting-marker-01-f.svg
painting-marker-02-f.svg
painting-marker-03-f.svg
painting-marker-04-f.svg
painting-marker-05-f.svg
painting-marker-06-f.svg
painting-marker-07-f.svg
painting-marker-properties-01-f.svg
painting-render-01-b.svg
painting-render-02-b.svg
painting-stroke-01-t.svg
painting-stroke-02-t.svg
painting-stroke-03-t.svg
painting-stroke-04-t.svg
painting-stroke-05-t.svg
painting-stroke-06-t.svg
painting-stroke-07-t.svg
painting-stroke-08-t.svg
painting-stroke-09-t.svg
painting-stroke-10-t.svg
paths-data-01-t.svg
paths-data-02-t.svg
paths-data-03-f.svg
paths-data-04-t.svg
paths-data-05-t.svg
paths-data-06-t.svg
paths-data-07-t.svg
paths-data-08-t.svg
paths-data-09-t.svg
paths-data-10-t.svg
paths-data-12-t.svg
paths-data-13-t.svg
paths-data-14-t.svg
paths-data-15-t.svg
paths-data-16-t.svg
paths-data-17-f.svg
paths-data-18-f.svg
paths-data-19-f.svg
paths-data-20-f.svg
paths-dom-01-f.svg
paths-dom-02-f.svg
pservers-grad-01-b.svg
pservers-grad-02-b.svg
pservers-grad-03-b.svg
pservers-grad-04-b.svg
pservers-grad-05-b.svg
pservers-grad-06-b.svg
pservers-grad-07-b.svg
pservers-grad-08-b.svg
pservers-grad-09-b.svg
pservers-grad-10-b.svg
pservers-grad-11-b.svg
pservers-grad-12-b.svg
pservers-grad-13-b.svg
pservers-grad-14-b.svg
pservers-grad-15-b.svg
pservers-grad-16-b.svg
pservers-grad-17-b.svg
pservers-grad-18-b.svg
pservers-grad-20-b.svg
pservers-grad-21-b.svg
pservers-grad-22-b.svg
pservers-grad-23-f.svg
pservers-grad-24-f.svg
pservers-grad-stops-01-f.svg
pservers-pattern-01-b.svg
pservers-pattern-02-f.svg
pservers-pattern-03-f.svg
pservers-pattern-04-f.svg
pservers-pattern-05-f.svg
pservers-pattern-06-f.svg
pservers-pattern-07-f.svg
pservers-pattern-08-f.svg
pservers-pattern-09-f.svg
render-elems-01-t.svg
render-elems-02-t.svg
render-elems-03-t.svg
render-elems-06-t.svg
render-elems-07-t.svg
render-elems-08-t.svg
render-groups-01-b.svg
render-groups-03-t.svg
script-handle-01-b.svg
script-handle-02-b.svg
script-handle-03-b.svg
script-handle-04-b.svg
script-specify-01-f.svg
script-specify-02-f.svg
shapes-circle-01-t.svg
shapes-circle-02-t.svg
shapes-ellipse-01-t.svg
shapes-ellipse-02-t.svg
shapes-ellipse-03-f.svg
shapes-grammar-01-f.svg
shapes-intro-01-t.svg
shapes-intro-02-f.svg
shapes-line-01-t.svg
shapes-line-02-f.svg
shapes-polygon-01-t.svg
shapes-polygon-02-t.svg
shapes-polygon-03-t.svg
shapes-polyline-01-t.svg
shapes-polyline-02-t.svg
shapes-rect-01-t.svg
shapes-rect-02-t.svg
shapes-rect-03-t.svg
shapes-rect-04-f.svg
shapes-rect-05-f.svg
shapes-rect-06-f.svg
shapes-rect-07-f.svg
struct-cond-01-t.svg
struct-cond-02-t.svg
struct-cond-03-t.svg
struct-cond-overview-02-f.svg
struct-cond-overview-03-f.svg
struct-cond-overview-04-f.svg
struct-cond-overview-05-f.svg
struct-defs-01-t.svg
struct-dom-01-b.svg
struct-dom-02-b.svg
struct-dom-03-b.svg
struct-dom-04-b.svg
struct-dom-05-b.svg
struct-dom-06-b.svg
struct-dom-07-f.svg
struct-dom-08-f.svg
struct-dom-11-f.svg
struct-dom-12-b.svg
struct-dom-13-f.svg
struct-dom-14-f.svg
struct-dom-15-f.svg
struct-dom-16-f.svg
struct-dom-17-f.svg
struct-dom-18-f.svg
struct-dom-19-f.svg
struct-dom-20-f.svg
struct-frag-01-t.svg
struct-frag-02-t.svg
struct-frag-03-t.svg
struct-frag-04-t.svg
struct-frag-05-t.svg
struct-frag-06-t.svg
struct-group-01-t.svg
struct-group-02-b.svg
struct-group-03-t.svg
struct-image-01-t.svg
struct-image-02-b.svg
struct-image-03-t.svg
struct-image-04-t.svg
struct-image-05-b.svg
struct-image-06-t.svg
struct-image-07-t.svg
struct-image-08-t.svg
struct-image-09-t.svg
struct-image-10-t.svg
struct-image-11-b.svg
struct-image-12-b.svg
struct-image-13-f.svg
struct-image-14-f.svg
struct-image-15-f.svg
struct-image-16-f.svg
struct-image-17-b.svg
struct-image-18-f.svg
struct-image-19-f.svg
struct-svg-01-f.svg
struct-svg-02-f.svg
struct-svg-03-f.svg
struct-symbol-01-b.svg
struct-use-01-t.svg
struct-use-03-t.svg
struct-use-04-b.svg
struct-use-05-b.svg
struct-use-06-b.svg
struct-use-07-b.svg
struct-use-08-b.svg
struct-use-09-b.svg
struct-use-10-f.svg
struct-use-11-f.svg
struct-use-12-f.svg
struct-use-13-f.svg
struct-use-14-f.svg
struct-use-15-f.svg
styling-class-01-f.svg
styling-css-01-b.svg
styling-css-02-b.svg
styling-css-03-b.svg
styling-css-04-f.svg
styling-css-05-b.svg
styling-css-06-b.svg
styling-css-07-f.svg
styling-css-08-f.svg
styling-css-09-f.svg
styling-css-10-f.svg
styling-elem-01-b.svg
styling-inherit-01-b.svg
styling-pres-01-t.svg
styling-pres-02-f.svg
styling-pres-03-f.svg
styling-pres-04-f.svg
styling-pres-05-f.svg
svgdom-over-01-f.svg
text-align-01-b.svg
text-align-02-b.svg
text-align-03-b.svg
text-align-04-b.svg
text-align-05-b.svg
text-align-06-b.svg
text-align-07-t.svg
text-align-08-b.svg
text-altglyph-01-b.svg
text-altglyph-02-b.svg
text-altglyph-03-b.svg
text-bidi-01-t.svg
text-deco-01-b.svg
text-dom-01-f.svg
text-dom-02-f.svg
text-dom-03-f.svg
text-dom-04-f.svg
text-dom-05-f.svg
text-fonts-01-t.svg
text-fonts-02-t.svg
text-fonts-03-t.svg
text-fonts-04-t.svg
text-fonts-05-f.svg
text-fonts-202-t.svg
text-fonts-203-t.svg
text-fonts-204-t.svg
text-intro-01-t.svg
text-intro-02-b.svg
text-intro-03-b.svg
text-intro-04-t.svg
text-intro-05-t.svg
text-intro-06-t.svg
text-intro-07-t.svg
text-intro-09-b.svg
text-intro-10-f.svg
text-intro-11-t.svg
text-intro-12-t.svg
text-path-01-b.svg
text-path-02-b.svg
text-spacing-01-b.svg
text-text-01-b.svg
text-text-03-b.svg
text-text-04-t.svg
text-text-05-t.svg
text-text-06-t.svg
text-text-07-t.svg
text-text-08-b.svg
text-text-09-t.svg
text-text-10-t.svg
text-text-11-t.svg
text-text-12-t.svg
text-tref-01-b.svg
text-tref-02-b.svg
text-tref-03-b.svg
text-tselect-01-b.svg
text-tselect-02-f.svg
text-tselect-03-f.svg
text-tspan-01-b.svg
text-tspan-02-b.svg
text-ws-01-t.svg
text-ws-02-t.svg
text-ws-03-t.svg
types-basic-01-f.svg
types-basic-02-f.svg
types-dom-01-b.svg
types-dom-02-f.svg
types-dom-03-b.svg
types-dom-04-b.svg
types-dom-05-b.svg
types-dom-06-f.svg
types-dom-07-f.svg
types-dom-08-f.svg
types-dom-svgfittoviewbox-01-f.svg
types-dom-svglengthlist-01-f.svg
types-dom-svgnumberlist-01-f.svg
types-dom-svgstringlist-01-f.svg
types-dom-svgtransformable-01-f.svg"

## clone the wiki if not already cloned
if [ ! -e egueb.wiki ]; then
	git clone git@github.com:turran/egueb.wiki.git
else
	cd egueb.wiki && git pull --rebase || cd ..
fi

cd egueb.wiki

err=`mktemp`
succeeded=0
failed=0
## Set the generic title
cat > $WIKIPAGE <<EOF
This test suite is based on [W3C SVG Test Suite](http://www.w3.org/Graphics/SVG/WG/wiki/Test_Suite_Overview)

Succeed: %SUCCEEDED%
Failed: %FAILED%

| Test | Result | Generated |
|------|--------|-----------|
EOF

## call gst-egueb-record on every uri
for i in $FILES; do
	echo "Processing $TESTSUITEURI/$i"
	## Use the same width/height as the generated pngs
	EINA_LOG_LEVEL=0 GST_DEBUG=0 gst-egueb-record -w 480 -h 360 $TESTSUITEURI/$i testsuite/egueb-$i 2> $err
	out=`ls testsuite/egueb-$i*`
	## get the stderr and also put it on the wiki
	## if everything's fine on the return value put a green mark, otherwise a red one
	errstr=`cat $err`
	preview=
	if [ -z "$errstr" ]; then
		errstr="*OK*"
	else
		errstr="FAILED"
	fi

	if [ "$out" = "testsuite/egueb-$i.png" ]; then
		preview="![Preview]($out)"
	elif [ -z "$out" ]; then
		preview="-"
	else
		preview="[Preview video]($out)"
	fi
	echo "|$i|$errstr|$preview|" >> $WIKIPAGE
done
